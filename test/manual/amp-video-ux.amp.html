<!doctype html>
<html âš¡>
<head>
  <meta charset="utf-8">
  <title>AMP #0</title>
  <link rel="canonical" href="amps.html" >
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <link href='https://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src="../../dist/amp.js"></script>
  <script async custom-element="amp-video" src="../../dist/v0/amp-video-0.1.max.js"></script>
  <style amp-custom>
    body {
      font-family: Verdana, sans-serif;
      color: #444;
    }
    header {
      font-family: "Times New Roman", Times, serif;
      color: white;
      background: black;
      padding: 20px;
      text-align: center;
      font-size: 24pt;
      font-style: italic;
      border-bottom: solid #FF5722 1px;
    }
    h2 {
      font-family: Helvetica, Times, serif;
      color: #FF5722;
    }
    article {
      margin: 0px 10px;
    }
  </style>
</head>
<body>
  <header role="banner">
      Accelerated Times
  </header>
  <main>
    <section>
      <amp-video
          src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
          poster="https://drive.google.com/uc?export=view&id=0B2jMfIObSlqQUnBrWm03aGx4NGc"
          width="16"
          height="9"
          layout="responsive">
      </amp-video>
    </section>
    <article>
      <h2>Lorem ipsum dolor sit amet, consectetur adipiscing elit!</h2>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Curabitur ullamcorper turpis vel commodo scelerisque. Phasellus
        luctus nunc ut elit cursus, et imperdiet diam vehicula.
        Duis et nisi sed urna blandit bibendum et sit amet erat.
        Suspendisse potenti. Curabitur consequat volutpat arcu nec
        elementum. Etiam a turpis ac libero varius condimentum.
        Maecenas sollicitudin felis aliquam tortor vulputate,
        ac posuere velit semper.
      </p>
      <p>
        Fusce pretium tempor justo, vitae consequat dolor maximus eget.
        Aliquam iaculis tincidunt quam sed maximus. Suspendisse faucibus
        ornare sodales. Nullam id dolor vitae arcu consequat ornare a
        et lectus. Sed tempus eget enim eget lobortis.
        Mauris sem est, accumsan sed tincidunt ut, sagittis vel arcu.
        Nullam in libero nisi.
      </p>
      <amp-video
          src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"
          poster="https://drive.google.com/uc?export=view&id=0B2jMfIObSlqQU1Nfbnp3UjRvSGc"
          width="16"
          height="9"
          layout="responsive">
      </amp-video>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Curabitur ullamcorper turpis vel commodo scelerisque. Phasellus
        luctus nunc ut elit cursus, et imperdiet diam vehicula.
        Duis et nisi sed urna blandit bibendum et sit amet erat.
        Suspendisse potenti. Curabitur consequat volutpat arcu nec
        elementum. Etiam a turpis ac libero varius condimentum.
        Maecenas sollicitudin felis aliquam tortor vulputate,
        ac posuere velit semper.
      </p>
      <p>
        Fusce pretium tempor justo, vitae consequat dolor maximus eget.
        Aliquam iaculis tincidunt quam sed maximus. Suspendisse faucibus
        ornare sodales. Nullam id dolor vitae arcu consequat ornare a
        et lectus. Sed tempus eget enim eget lobortis.
        Mauris sem est, accumsan sed tincidunt ut, sagittis vel arcu.
        Nullam in libero nisi.
      </p>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Curabitur ullamcorper turpis vel commodo scelerisque. Phasellus
        luctus nunc ut elit cursus, et imperdiet diam vehicula.
        Duis et nisi sed urna blandit bibendum et sit amet erat.
        Suspendisse potenti. Curabitur consequat volutpat arcu nec
        elementum. Etiam a turpis ac libero varius condimentum.
        Maecenas sollicitudin felis aliquam tortor vulputate,
        ac posuere velit semper.Duis et nisi sed urna blandit bibendum
        Suspendisse potenti. Curabitur consequat volutpat arcu nec
        elementum. Etiam a turpis ac libero varius condimentum.
        Maecenas sollicitudin felis aliquam tortor vulputate,
        ac posuere velit semper.
      </p>
      <p>
        Fusce pretium tempor justo, vitae consequat dolor maximus eget.
        Aliquam iaculis tincidunt quam sed maximus. Suspendisse faucibus
        ornare sodales. Nullam id dolor vitae arcu consequat ornare a
        et lectus. Sed tempus eget enim eget lobortis.
        Mauris sem est, accumsan sed tincidunt ut, sagittis vel arcu.
        Nullam in libero nisi.
      </p>
      <amp-video
          src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4"
          width="16"
          height="9"
          layout="responsive">
      </amp-video>
      <p>
        Fusce pretium tempor justo, vitae consequat dolor maximus eget.
        Aliquam iaculis tincidunt quam sed maximus. Suspendisse faucibus
        ornare sodales. Nullam id dolor vitae arcu consequat ornare a
        et lectus. Sed tempus eget enim eget lobortis.
        Mauris sem est, accumsan sed tincidunt ut, sagittis vel arcu.
        Nullam in libero nisi.
      </p>
    </article>
  </main>
  <script>
    setTimeout(function() {
      var io = new IntersectionObserver(
        entries => {
          entries.forEach( e => {
            // Start observing an element
            console.log(e.intersectionRatio, e);
            var v = e.target.querySelectorAll('video')[0];
            if(e.intersectionRatio > 0.4) {
              v.setAttribute('autoplay', 'true');
              v.play();
            } else {
              v.pause();
            }
          });
        },
        {
          threshold: [0.4]
        }
      );
      var vs = document.querySelectorAll('amp-video');
      vs.forEach( elem => {
        elem.addEventListener('click',  function() {
          v.setAttribute('controls', '');
          v.muted = false;
        });
        var v = elem.querySelectorAll('video')[0];
        v.addEventListener("canplay", function() { v.muted = true; }, false);
        v.setAttribute('muted', 'true');
        // Start observing an element
        io.observe(elem);
      });
    }, 300);

  </script>
</body>
</html>
